<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Barford Golf Society Handicap Calculator</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    /* styles trimmed for brevity */
  </style>
</head>
<body>
  <header>
    üèâ Barford Golf Society Handicap Calculator
    <div class="dark-toggle">
      <label for="darkSwitch">Dark Mode</label>
      <input type="checkbox" id="darkSwitch">
    </div>
  </header>

  <div class="navbar">
    <a href="index.html">Home</a>
    <a href="events.html">Events</a>
    <a href="scores.html">Scores</a>
    <a href="admin.html">Admin</a>
  </div>

  <div class="topbar">
    <input type="password" id="pwInput" placeholder="Enter password">
    <button class="btn btn-unlock" onclick="unlockInputs()">Unlock</button>
    <button class="btn btn-lock" onclick="lockInputs()">Lock</button>
    <button class="btn btn-calc" onclick="calculateHandicaps()">Calculate</button>
    <button class="btn btn-prev" onclick="prevRound()">‚óÄ Prev</button>
    <button class="btn btn-next" onclick="nextRound()">Next ‚ñ∂</button>
    <button class="btn btn-add" onclick="addPlayer()">+ Player</button>
    <button class="btn btn-pass" onclick="changePassword()">Change Password</button>
    <button class="btn btn-reset" id="clearLeagueBtn" onclick="confirmReset()">Clear League</button>
    <button class="btn btn-export" onclick="exportLeaderboardCSV()">Export Leaderboard (CSV)</button>
    <button class="btn btn-export" onclick="exportAllCSV()">Export All (CSV)</button>
    <button class="btn btn-export" onclick="exportPlayerStatsCSV()">Export Stats (CSV)</button>
  </div>

  <main>
    <div class="round-info">
      <h3 id="roundHeader">Round 1 of 7</h3>
      <div class="progress-bar"><div id="progressFill"></div></div>
    </div>

    <div id="tableContainer">
      <div id="secretNotice">Round locked ‚Äî unlock to view/edit this round</div>
      <table id="playersTableWrap">
        <thead>
          <tr>
            <th>Rank</th>
            <th>Player</th>
            <th id="hcpHeader">Round 1 HCP</th>
            <th>Points</th>
            <th>Adj</th>
            <th id="newHcpHeader">Next HCP</th>
            <th>Total (Best 5)</th>
            <th>DNP</th>
          </tr>
        </thead>
        <tbody id="playersTable"></tbody>
      </table>
    </div>

    <div id="chartContainer">
      <h3 style="text-align:center;color:var(--green)">Handicap Progression</h3>
      <canvas id="hcpChart"></canvas>
    </div>

    <div id="statsContainer">
      <h3 style="text-align:center;color:var(--green)">Player Stats</h3>
      <div id="playerStatsGrid" style="display:grid;gap:16px;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));"></div>
    </div>
  </main>

  <div id="toast"></div>

  <script>
    // Include all core Supabase logic, MVP stats, exports, avatars, and rendering here
    // (from the previous full version, adjusted for new features like stats & badges)
  </script>
</body>
</html>
